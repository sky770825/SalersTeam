<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
  <meta name="description" content="å°ä¸­åŒ—å±¯é å”®å±‹ï¼Œè”£å“¥åš´é¸å»ºæ¡ˆï¼Œå–®åª43è¬ç‰¹åƒ¹å„ªæƒ ã€‚æ©Ÿæ·ç‰¹å€æœ€æˆç†Ÿåœ°æ®µï¼Œä¸‰å€‹æ·é‹åŒ…è¦†ï¼ŒCostcoã€ç¸½ç«™å¤œå¸‚åœ¨å´ã€‚ç«‹å³å ±åç™»è¨˜ä¿ç•™å¸­ï¼" />
  <meta name="keywords" content="å°ä¸­åŒ—å±¯,é å”®å±‹,43è¬,è”£å“¥,æ©Ÿæ·ç‰¹å€,æˆ¿åœ°ç”¢" />
  <meta property="og:title" content="è”£å“¥å–®åª43è¬ç§è¨Šæˆ‘ - å ±åç¶²é " />
  <meta property="og:description" content="å°ä¸­åŒ—å±¯é å”®å±‹ï¼Œè”£å“¥åš´é¸å»ºæ¡ˆï¼Œå–®åª43è¬ç‰¹åƒ¹å„ªæƒ ã€‚ç«‹å³å ±åç™»è¨˜ä¿ç•™å¸­ï¼" />
  <meta property="og:type" content="website" />
  <title>è”£å“¥å–®åª43è¬ç§è¨Šæˆ‘ - å ±åç¶²é </title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap" rel="stylesheet">
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    body {
      font-family: 'Noto Sans TC', sans-serif;
      background-color: #f3f4f6;
    }
    ::-webkit-scrollbar {
      width: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #f1f1f1; 
    }
    ::-webkit-scrollbar-thumb {
      background: #888; 
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #555; 
    }
    @keyframes fade-in {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .animate-fade-in {
      animation: fade-in 0.5s ease-in;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    // ============================================
    // é…ç½®å€ï¼šè«‹åœ¨é€™è£¡è¨­ç½®æ‚¨çš„ Google Apps Script URL
    // ============================================
    // å¦‚ä½•ç²å– URLï¼š
    // 1. æ‰“é–‹ Google Sheets > æ“´å±•ç¨‹åº > Apps Script
    // 2. éƒ¨ç½²ç‚ºç¶²é æ‡‰ç”¨ç¨‹å¼
    // 3. è¤‡è£½ Web æ‡‰ç”¨ç¨‹å¼ URL ä¸¦è²¼åˆ°ä¸‹é¢
    // ============================================
    const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwT4MIuzanc4lrIzc2Z8TJdHLfcjGkTGW3Ifh7bs-aVBG8gcxNQklApzE3nkVu_MtmH/exec';

    // æ ¼å¼åŒ–æ•¸æ“šå‡½æ•¸
    function formatFormDataForSheets(data) {
      return [
        new Date().toLocaleString('zh-TW', { timeZone: 'Asia/Taipei' }),
        data.name,
        data.lineId,
        data.phone,
        data.location,
        data.q1_price_perception === 'yes' ? 'æ˜¯' : 'å¦',
        data.q2_large_base === 'consider' ? 'æœƒè€ƒæ…®' : 'æ²’èˆˆè¶£',
        data.q3_safety_value === 'yes' ? 'æ˜¯' : 'ä¸æ˜¯',
        data.q4_costco_value === 'yes' ? 'ä¸€å®šæ˜¯' : 'é‚„å¥½',
        data.q5_ac_preference === 'full_install' ? 'å†·æ°£å…¨éƒ¨è£åˆ°å¥½' : 'åªé€å®¤å¤–æ©Ÿ',
        data.q6_meet_event === true ? 'æˆ‘æœƒåˆ°' : 'æˆ‘æƒ³æ”¹å¤©',
        data.q7_self_visit ? 'æˆ‘æƒ³åœ¨ç›´æ’­é–“æ‹¿åˆ° 43 è¬ä¿ç•™å¸­åœ°å€' : '',
      ];
    }

    // æäº¤åˆ° Google Sheets
    async function submitToGoogleSheets(data) {
      if (!GOOGLE_SCRIPT_URL) {
        console.error('Google Script URL æœªè®¾ç½®');
        return { success: false, error: 'Google Script URL æœªé…ç½®' };
      }

      try {
        const rowData = formatFormDataForSheets(data);
        console.log('å‡†å¤‡æäº¤æ•°æ®åˆ° Google Sheets:', { url: GOOGLE_SCRIPT_URL, data: rowData });

        await fetch(GOOGLE_SCRIPT_URL, {
          method: 'POST',
          mode: 'no-cors',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ data: rowData }),
        });

        console.log('è¯·æ±‚å·²å‘é€');
        return { success: true };
      } catch (error) {
        console.error('æäº¤å¤±è´¥:', error);
        return { success: false, error: error.message || 'æäº¤å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•' };
      }
    }

    // Loading Screen
    function LoadingScreen() {
      return (
        <div className="fixed inset-0 z-50 bg-black flex flex-col items-center justify-center text-white">
          <div className="relative">
            <div className="absolute inset-0 bg-red-600 blur-2xl opacity-30 animate-pulse rounded-full"></div>
            <div className="w-16 h-16 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin relative z-10"></div>
          </div>
          <div className="mt-8 text-center space-y-2">
            <h2 className="text-2xl font-black tracking-widest text-white drop-shadow-lg">
              æˆ¿ç”¢æ“ºæ¸¡äºº<span className="text-red-600">è”£å“¥</span>
            </h2>
            <p className="text-xl font-black tracking-wide text-yellow-400 drop-shadow-lg">
              å»ºæ¡ˆåš´é¸
            </p>
          </div>
          <p className="text-gray-400 text-sm mt-6 tracking-widest uppercase animate-pulse">
            LOADING...
          </p>
        </div>
      );
    }

    // Hero Component
    function Hero() {
      return (
        <div className="w-full bg-black">
          <div className="max-w-md mx-auto relative group overflow-hidden shadow-2xl">
            <div className="aspect-[4/5] w-full bg-gray-900 relative">
              <img 
                src="https://i.postimg.cc/q7x6Tcwg/S-180158515.jpg" 
                alt="æˆ¿ç”¢æ“ºæ¸¡äººè”£å“¥" 
                className="w-full h-full object-cover"
                loading="lazy"
                onError={(e) => {
                  e.target.style.display = 'none';
                }}
              />
            </div>
            <div className="bg-gray-900 px-6 pt-10 pb-10 relative rounded-t-[2rem] -mt-10 z-10 border-t border-gray-800">
              <div className="absolute -top-5 left-1/2 transform -translate-x-1/2 w-max">
                <span className="bg-red-600 text-white text-base font-bold px-6 py-2 rounded-full border-4 border-gray-900 shadow-[0_0_20px_rgba(220,38,38,0.5)] animate-pulse flex items-center gap-2">
                  ğŸ”¥ é™é‡ç›´åˆ‡é‡é»
                </span>
              </div>
              <h1 className="text-center mb-6">
                <span className="block text-white text-lg font-bold tracking-widest opacity-80 mb-1">
                  å°ä¸­åŒ—å±¯é å”®å±‹
                </span>
                <span className="block text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-200 via-yellow-400 to-yellow-200 drop-shadow-sm">
                  43 è¬/åª
                </span>
              </h1>
              <div className="bg-gray-800 rounded-xl p-4 border border-gray-700 mb-6 relative overflow-hidden">
                <div className="absolute top-0 right-0 w-16 h-16 bg-red-600/10 rounded-bl-full -mr-8 -mt-8"></div>
                <div className="flex items-center justify-between mb-3 border-b border-gray-700 pb-3">
                  <span className="text-gray-400 font-bold">ç›®å‰è¡Œæƒ…</span>
                  <span className="text-gray-400 font-medium line-through decoration-red-500 decoration-2">53-63 è¬/åª</span>
                </div>
                <div className="flex items-center justify-between">
                  <span className="text-white font-bold flex items-center gap-2">
                    <span className="w-2 h-2 rounded-full bg-yellow-400 animate-pulse"></span>
                    è”£å“¥ç‰¹è«‡
                  </span>
                  <span className="text-2xl font-black text-yellow-400">43 è¬/åª</span>
                </div>
              </div>
              <p className="text-gray-300 text-center text-sm leading-relaxed font-medium">
                æ©Ÿæ·ç‰¹å€æœ€æˆç†Ÿåœ°æ®µ<br/>
                <span className="text-red-400">ä¸ç”¨é–‹åˆè·³ï¼Œç›´æ¥æ‰“é€²æ ¸å¿ƒåƒ¹æ ¼å¸¶</span>
              </p>
            </div>
          </div>
        </div>
      );
    }

    // Questionnaire Component
    function Questionnaire({ onComplete }) {
      // å¾ localStorage æ¢å¾©è¡¨å–®æ•¸æ“š
      const getInitialFormData = () => {
        try {
          const saved = localStorage.getItem('beitun_form_data');
          if (saved) {
            return JSON.parse(saved);
          }
        } catch (e) {
          console.warn('ç„¡æ³•è®€å–ä¿å­˜çš„è¡¨å–®æ•¸æ“š:', e);
        }
        return {
          q1_price_perception: '',
          q2_large_base: '',
          q3_safety_value: '',
          q4_costco_value: '',
          q5_ac_preference: '',
          q6_meet_event: false,
          q7_self_visit: false,
          name: '',
          lineId: '',
          phone: '',
          location: ''
        };
      };

      const [formData, setFormData] = useState(getInitialFormData);
      const [errors, setErrors] = useState({});
      const [isSubmitting, setIsSubmitting] = useState(false);
      const [submitError, setSubmitError] = useState(null);
      const [hasSubmitted, setHasSubmitted] = useState(false);

      const handleInputChange = (e) => {
        const { name, value, type } = e.target;
        let newValue;
        if (type === 'checkbox') {
          newValue = e.target.checked;
        } else {
          newValue = value;
        }
        
        const updatedData = { ...formData, [name]: newValue };
        setFormData(updatedData);
        
        // ä¿å­˜åˆ° localStorage
        try {
          localStorage.setItem('beitun_form_data', JSON.stringify(updatedData));
        } catch (e) {
          console.warn('ç„¡æ³•ä¿å­˜è¡¨å–®æ•¸æ“š:', e);
        }
        
        if (errors[name]) {
          setErrors(prev => ({ ...prev, [name]: undefined }));
        }
      };

      const validate = () => {
        const newErrors = {};
        if (!formData.q1_price_perception) newErrors.q1_price_perception = "è«‹å›ç­”æ­¤å•é¡Œ";
        if (!formData.q2_large_base) newErrors.q2_large_base = "è«‹å›ç­”æ­¤å•é¡Œ";
        if (!formData.q3_safety_value) newErrors.q3_safety_value = "è«‹å›ç­”æ­¤å•é¡Œ";
        if (!formData.q4_costco_value) newErrors.q4_costco_value = "è«‹å›ç­”æ­¤å•é¡Œ";
        if (!formData.q5_ac_preference) newErrors.q5_ac_preference = "è«‹é¸æ“‡å†·æ°£æ–¹æ¡ˆ";
        if (!formData.name.trim()) newErrors.name = "è«‹è¼¸å…¥çœŸå¯¦å§“å";
        if (!formData.lineId.trim()) newErrors.lineId = "è«‹è¼¸å…¥Line ID";
        
        // å¢å¼·æ‰‹æ©Ÿè™Ÿç¢¼é©—è­‰ï¼ˆå°ç£æ‰‹æ©Ÿè™Ÿç¢¼æ ¼å¼ï¼‰
        const phoneRegex = /^09\d{8}$/;
        if (!formData.phone.trim()) {
          newErrors.phone = "è«‹è¼¸å…¥æ‰‹æ©Ÿè™Ÿç¢¼";
        } else if (!phoneRegex.test(formData.phone.trim())) {
          newErrors.phone = "è«‹è¼¸å…¥æ­£ç¢ºçš„æ‰‹æ©Ÿè™Ÿç¢¼æ ¼å¼ï¼ˆä¾‹ï¼š0912345678ï¼‰";
        }
        
        if (!formData.location.trim()) newErrors.location = "è«‹è¼¸å…¥å±…ä½åœ°å€";
        setErrors(newErrors);
        return Object.keys(newErrors).length === 0;
      };

      const handleSubmit = async (e) => {
        e.preventDefault();
        
        // é˜²é‡è¤‡æäº¤
        if (hasSubmitted || isSubmitting) {
          return;
        }
        
        if (!validate()) {
          const firstError = document.querySelector('.error-message');
          firstError?.scrollIntoView({ behavior: 'smooth', block: 'center' });
          return;
        }

        setIsSubmitting(true);
        setSubmitError(null);
        setHasSubmitted(true);

        try {
          const result = await submitToGoogleSheets(formData);
          if (result.success) {
            console.log('è¡¨å–®å·²æˆåŠŸæäº¤åˆ° Google Sheets');
            // æ¸…é™¤ä¿å­˜çš„è¡¨å–®æ•¸æ“š
            try {
              localStorage.removeItem('beitun_form_data');
            } catch (e) {
              console.warn('ç„¡æ³•æ¸…é™¤ä¿å­˜çš„è¡¨å–®æ•¸æ“š:', e);
            }
            onComplete();
          } else {
            setSubmitError(result.error || 'æäº¤å¤±æ•—ï¼Œè«‹ç¨å¾Œé‡è©¦');
            setHasSubmitted(false); // å…è¨±é‡è©¦
            setIsSubmitting(false);
          }
        } catch (error) {
          console.error('æäº¤æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
          setSubmitError('æäº¤æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œé‡è©¦');
          setHasSubmitted(false); // å…è¨±é‡è©¦
          setIsSubmitting(false);
        }
      };

      return (
        <div className="max-w-md mx-auto bg-white -mt-4 rounded-t-3xl relative z-10 px-6 py-8 shadow-inner">
          <div className="mb-8">
            <h2 className="text-xl font-black text-gray-800 mb-4 border-l-4 border-red-700 pl-3">
              ğŸ“ å€åŸŸæ¢ä»¶ä¸€æ¬¡çµ¦ä½ 
            </h2>
            <div className="bg-gray-50 p-5 rounded-xl space-y-3 text-sm font-medium text-gray-700 shadow-sm border border-gray-100">
              <div className="flex items-start gap-2">
                <span className="text-green-600 mt-0.5">âœ“</span>
                <span>ä¸‰å€‹æ·é‹åŒ…è¦†</span>
              </div>
              <div className="flex items-start gap-2">
                <span className="text-green-600 mt-0.5">âœ“</span>
                <span>74 å¿«é€Ÿé“è·¯å…©å€‹é–˜é“å£</span>
              </div>
              <div className="flex items-start gap-2">
                <span className="text-green-600 mt-0.5">âœ“</span>
                <span>Costcoã€ç¸½ç«™å¤œå¸‚ã€å¤§åœ°å»£å ´åœ¨å´</span>
              </div>
              <div className="flex items-start gap-2">
                <span className="text-green-600 mt-0.5">âœ“</span>
                <span>ä¸‰é–“è²´æ—å­¸æ ¡ï¼‹ä¸­åœ‹é†«è—¥ BOT æ¡ˆ</span>
              </div>
              <div className="flex items-start gap-2">
                <span className="text-green-600 mt-0.5">âœ“</span>
                <span>æ·é‹ï¼‹ç«è»Šç›´é”å°ä¸­é«˜éµ</span>
              </div>
              <div className="flex items-start gap-2">
                <span className="text-green-600 mt-0.5">âœ“</span>
                <span>é’å£¯æ´¾é‡åŠƒå€ï¼Œå•†æ¥­æ©Ÿèƒ½æœ€æˆç†Ÿ</span>
              </div>
            </div>
            <p className="text-center text-sm font-bold text-red-600 mt-4 animate-pulse">ğŸ—³ ä¾†ï¼ä¸‹é¢é€™ 7 é¡Œä½ ä¸€å®šè¦é¸ï¼š</p>
          </div>

          <form onSubmit={handleSubmit} className="space-y-8">
            {/* Question 1 */}
            <div className="space-y-2">
              <label className="font-bold text-gray-900 block text-lg">
                1. ä½ è¦ºå¾— <span className="text-red-600">åŒ—å±¯é å”® 43 è¬/åª</span> è²´å—ï¼Ÿ <span className="text-red-500">*</span>
              </label>
              <div className="flex gap-3">
                <label className="flex items-center justify-center space-x-2 border-2 border-gray-200 p-3 rounded-lg flex-1 cursor-pointer hover:border-red-500 hover:bg-red-50 has-[:checked]:border-red-600 has-[:checked]:bg-red-50 transition">
                  <input type="radio" name="q1_price_perception" value="yes" checked={formData.q1_price_perception === 'yes'} onChange={handleInputChange} className="accent-red-600 w-5 h-5" />
                  <span className="font-bold">æ˜¯</span>
                </label>
                <label className="flex items-center justify-center space-x-2 border-2 border-gray-200 p-3 rounded-lg flex-1 cursor-pointer hover:border-red-500 hover:bg-red-50 has-[:checked]:border-red-600 has-[:checked]:bg-red-50 transition">
                  <input type="radio" name="q1_price_perception" value="no" checked={formData.q1_price_perception === 'no'} onChange={handleInputChange} className="accent-red-600 w-5 h-5" />
                  <span className="font-bold">å¦</span>
                </label>
              </div>
              {errors.q1_price_perception && <p className="text-red-500 text-xs error-message flex items-center">âš  {errors.q1_price_perception}</p>}
            </div>

            {/* Question 2 */}
            <div className="space-y-2">
              <label className="font-bold text-gray-900 block text-lg">
                2. å¦‚æœé‚„æ˜¯ <span className="text-red-600">1700åªæ·é‹200å…¬å°ºçš„å¤§åŸºåœ°</span> å‘¢ï¼Ÿ <span className="text-red-500">*</span>
              </label>
              <div className="flex flex-col gap-3">
                <label className="flex items-center space-x-3 border-2 border-gray-200 p-4 rounded-lg cursor-pointer hover:border-red-500 hover:bg-red-50 has-[:checked]:border-red-600 has-[:checked]:bg-red-50 transition">
                  <input type="radio" name="q2_large_base" value="consider" checked={formData.q2_large_base === 'consider'} onChange={handleInputChange} className="accent-red-600 w-5 h-5" />
                  <span className="font-bold">æœƒè€ƒæ…®</span>
                </label>
                <label className="flex items-center space-x-3 border-2 border-gray-200 p-4 rounded-lg cursor-pointer hover:border-red-500 hover:bg-red-50 has-[:checked]:border-red-600 has-[:checked]:bg-red-50 transition">
                  <input type="radio" name="q2_large_base" value="not_interested" checked={formData.q2_large_base === 'not_interested'} onChange={handleInputChange} className="accent-red-600 w-5 h-5" />
                  <span className="font-bold">æ²’èˆˆè¶£</span>
                </label>
              </div>
              {errors.q2_large_base && <p className="text-red-500 text-xs error-message flex items-center">âš  {errors.q2_large_base}</p>}
            </div>

            {/* Question 3 */}
            <div className="space-y-2">
              <label className="font-bold text-gray-900 block text-lg">
                3. <span className="text-red-600">é›™åˆ¶éœ‡ï¼‹é›™éµæ·é‹</span>ï¼Œå°ä½ æŠ•è³‡æ˜¯åŠ åˆ†å—ï¼Ÿ <span className="text-red-500">*</span>
              </label>
              <div className="flex gap-3">
                <label className="flex items-center justify-center space-x-2 border-2 border-gray-200 p-3 rounded-lg flex-1 cursor-pointer hover:border-red-500 hover:bg-red-50 has-[:checked]:border-red-600 has-[:checked]:bg-red-50 transition">
                  <input type="radio" name="q3_safety_value" value="yes" checked={formData.q3_safety_value === 'yes'} onChange={handleInputChange} className="accent-red-600 w-5 h-5" />
                  <span className="font-bold">æ˜¯</span>
                </label>
                <label className="flex items-center justify-center space-x-2 border-2 border-gray-200 p-3 rounded-lg flex-1 cursor-pointer hover:border-red-500 hover:bg-red-50 has-[:checked]:border-red-600 has-[:checked]:bg-red-50 transition">
                  <input type="radio" name="q3_safety_value" value="no" checked={formData.q3_safety_value === 'no'} onChange={handleInputChange} className="accent-red-600 w-5 h-5" />
                  <span className="font-bold">ä¸æ˜¯</span>
                </label>
              </div>
              {errors.q3_safety_value && <p className="text-red-500 text-xs error-message flex items-center">âš  {errors.q3_safety_value}</p>}
            </div>

            {/* Question 4 */}
            <div className="space-y-2">
              <label className="font-bold text-gray-900 block text-lg">
                4. é›¢ <span className="text-red-600">Costco è¶…è¿‘</span>ï¼Œæ˜¯ä¸æ˜¯æˆ¿åœ°ç”¢çµ•å°åŠ åˆ†é …ï¼Ÿ <span className="text-red-500">*</span>
              </label>
              <div className="flex gap-3">
                <label className="flex items-center justify-center space-x-2 border-2 border-gray-200 p-3 rounded-lg flex-1 cursor-pointer hover:border-red-500 hover:bg-red-50 has-[:checked]:border-red-600 has-[:checked]:bg-red-50 transition">
                  <input type="radio" name="q4_costco_value" value="yes" checked={formData.q4_costco_value === 'yes'} onChange={handleInputChange} className="accent-red-600 w-5 h-5" />
                  <span className="font-bold">ä¸€å®šæ˜¯</span>
                </label>
                <label className="flex items-center justify-center space-x-2 border-2 border-gray-200 p-3 rounded-lg flex-1 cursor-pointer hover:border-red-500 hover:bg-red-50 has-[:checked]:border-red-600 has-[:checked]:bg-red-50 transition">
                  <input type="radio" name="q4_costco_value" value="no" checked={formData.q4_costco_value === 'no'} onChange={handleInputChange} className="accent-red-600 w-5 h-5" />
                  <span className="font-bold">é‚„å¥½</span>
                </label>
              </div>
              {errors.q4_costco_value && <p className="text-red-500 text-xs error-message flex items-center">âš  {errors.q4_costco_value}</p>}
            </div>

            {/* Question 5 */}
            <div className="space-y-2">
              <label className="font-bold text-gray-900 block text-lg">
                5. å»ºå•†é€å†·æ°£ï¼Œä½ æƒ³è¦å“ªä¸€å€‹ï¼Ÿ <span className="text-red-500">*</span>
              </label>
              <div className="flex flex-col gap-3">
                <label className="flex items-center space-x-3 border-2 border-gray-200 p-4 rounded-lg cursor-pointer hover:border-red-500 hover:bg-red-50 has-[:checked]:border-red-600 has-[:checked]:bg-red-50 transition">
                  <input type="radio" name="q5_ac_preference" value="full_install" checked={formData.q5_ac_preference === 'full_install'} onChange={handleInputChange} className="accent-red-600 w-5 h-5" />
                  <span className="font-bold">å†·æ°£å…¨éƒ¨è£åˆ°å¥½</span>
                </label>
                <label className="flex items-center space-x-3 border-2 border-gray-200 p-4 rounded-lg cursor-pointer hover:border-red-500 hover:bg-red-50 has-[:checked]:border-red-600 has-[:checked]:bg-red-50 transition">
                  <input type="radio" name="q5_ac_preference" value="outdoor_only" checked={formData.q5_ac_preference === 'outdoor_only'} onChange={handleInputChange} className="accent-red-600 w-5 h-5" />
                  <span className="font-bold">åªé€å®¤å¤–æ©Ÿ</span>
                </label>
              </div>
              {errors.q5_ac_preference && <p className="text-red-500 text-xs error-message flex items-center">âš  {errors.q5_ac_preference}</p>}
            </div>

            {/* Question 6 */}
            <div className="bg-yellow-50 p-4 rounded-xl border border-yellow-200">
              <label className="font-bold text-gray-900 block text-lg mb-2">
                6. <span className="inline-flex items-center gap-1 bg-yellow-400 text-black px-1 rounded">ğŸ“… 12/13ï¼ˆå…­ï¼‰æ—©ä¸Š 11:00</span>
              </label>
              <p className="text-gray-800 font-medium mb-3">ä½ é¡˜æ„ä¾† <span className="text-red-600 font-bold underline">å°ä¸­é«˜éµ</span> è·Ÿè”£å“¥ä¸€èµ·åæ·é‹çœ‹æˆ¿å­å—ï¼Ÿ</p>
              <div className="flex gap-3">
                <label className="flex items-center justify-center space-x-2 bg-white border-2 border-gray-200 p-3 rounded-lg flex-1 cursor-pointer hover:border-red-500 hover:bg-red-50 has-[:checked]:border-red-600 has-[:checked]:bg-red-50 transition shadow-sm">
                  <input type="radio" name="q6_meet_event" value="yes" checked={formData.q6_meet_event === true} onChange={() => setFormData(prev => ({ ...prev, q6_meet_event: true }))} className="accent-red-600 w-5 h-5" />
                  <span className="font-bold">æˆ‘æœƒåˆ°</span>
                </label>
                <label className="flex items-center justify-center space-x-2 bg-white border-2 border-gray-200 p-3 rounded-lg flex-1 cursor-pointer hover:border-red-500 hover:bg-red-50 has-[:checked]:border-red-600 has-[:checked]:bg-red-50 transition shadow-sm">
                  <input type="radio" name="q6_meet_event" value="no" checked={formData.q6_meet_event === false} onChange={() => setFormData(prev => ({ ...prev, q6_meet_event: false }))} className="accent-red-600 w-5 h-5" />
                  <span className="font-bold">æˆ‘æƒ³æ”¹å¤©</span>
                </label>
              </div>
            </div>

            {/* Question 7 */}
            <div className="space-y-2">
              <label className="font-bold text-gray-900 block text-lg">
                7. å¦‚æœä½ æƒ³ <span className="text-red-600">è‡ªå·±å…ˆå»çœ‹ç¾å ´</span>
              </label>
              <label className="flex items-start space-x-3 p-4 rounded-xl border-2 border-dashed border-red-300 bg-red-50 cursor-pointer hover:bg-red-100 transition">
                <input type="checkbox" name="q7_self_visit" checked={formData.q7_self_visit} onChange={handleInputChange} className="mt-1 w-6 h-6 accent-red-600 shrink-0" />
                <span className="text-base font-bold text-gray-800">
                  æˆ‘æƒ³åœ¨ç›´æ’­é–“æ‹¿åˆ° <span className="text-red-600 text-lg">43 è¬ä¿ç•™å¸­åœ°å€</span>
                </span>
              </label>
            </div>

            {/* Personal Data */}
            <div className="pt-8 border-t-2 border-gray-100 space-y-4">
              <h3 className="text-xl font-black text-gray-800 flex items-center mb-6">
                <span className="w-2 h-8 bg-red-600 mr-3 rounded-full"></span>
                ç™»è¨˜ 43 è¬ä¿ç•™å¸­ (å¿…å¡«)
              </h3>
              
              <div className="relative">
                <span className="absolute top-3.5 left-3 text-gray-400">ğŸ‘¤</span>
                <input type="text" name="name" placeholder="çœŸå¯¦å§“å" value={formData.name} onChange={handleInputChange} className={`w-full pl-10 pr-4 py-3 rounded-lg border-2 ${errors.name ? 'border-red-500 bg-red-50' : 'border-gray-200'} focus:outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500 transition`} />
                {errors.name && <p className="text-red-500 text-xs mt-1 ml-2 font-bold">{errors.name}</p>}
              </div>

              <div className="relative">
                <span className="absolute top-3.5 left-3 text-gray-400">ğŸ’¬</span>
                <input type="text" name="lineId" placeholder="Line ID" value={formData.lineId} onChange={handleInputChange} className={`w-full pl-10 pr-4 py-3 rounded-lg border-2 ${errors.lineId ? 'border-red-500 bg-red-50' : 'border-gray-200'} focus:outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500 transition`} />
                {errors.lineId && <p className="text-red-500 text-xs mt-1 ml-2 font-bold">{errors.lineId}</p>}
              </div>

              <div className="relative">
                <span className="absolute top-3.5 left-3 text-gray-400">ğŸ“±</span>
                <input type="tel" name="phone" placeholder="æ‰‹æ©Ÿé›»è©±ï¼ˆä¾‹ï¼š0912345678ï¼‰" value={formData.phone} onChange={handleInputChange} maxLength="10" pattern="[0-9]*" inputMode="numeric" className={`w-full pl-10 pr-4 py-3 rounded-lg border-2 ${errors.phone ? 'border-red-500 bg-red-50' : 'border-gray-200'} focus:outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500 transition`} />
                {errors.phone && <p className="text-red-500 text-xs mt-1 ml-2 font-bold">{errors.phone}</p>}
              </div>

              <div className="relative">
                <span className="absolute top-3.5 left-3 text-gray-400">ğŸ“</span>
                <input type="text" name="location" placeholder="å¾å“ªè£¡ä¾† (ä¾‹ï¼šå°ä¸­ã€å°åŒ—)" value={formData.location} onChange={handleInputChange} className={`w-full pl-10 pr-4 py-3 rounded-lg border-2 ${errors.location ? 'border-red-500 bg-red-50' : 'border-gray-200'} focus:outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500 transition`} />
                {errors.location && <p className="text-red-500 text-xs mt-1 ml-2 font-bold">{errors.location}</p>}
              </div>
            </div>

            {submitError && (
              <div className="bg-red-50 border-2 border-red-500 rounded-lg p-4 mb-4">
                <p className="text-red-700 text-sm font-bold flex items-center gap-2">
                  âš  {submitError}
                </p>
              </div>
            )}

            <button type="submit" disabled={isSubmitting} className="w-full bg-gradient-to-r from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed text-white font-black text-xl py-4 rounded-xl shadow-xl transform active:scale-95 transition-all flex items-center justify-center gap-2 border border-white/20">
              {isSubmitting ? (
                <>
                  <div className="w-6 h-6 border-4 border-white border-t-transparent rounded-full animate-spin"></div>
                  æäº¤ä¸­...
                </>
              ) : (
                <>
                  ğŸ“¤ ç«‹å³é€å‡ºå•åˆ¸
                </>
              )}
            </button>
          </form>
        </div>
      );
    }

    // Success Screen
    function SuccessScreen({ onClose }) {
      const lineUrl = "https://lin.ee/28b2R6ez";
      const message = "è”£å“¥+1æˆ‘æƒ³è¦è²·å°ä¸­æ©Ÿæ·çš„æˆ¿å­";
      const [copied, setCopied] = useState(false);

      const handleCopy = async () => {
        try {
          await navigator.clipboard.writeText(message);
          setCopied(true);
          setTimeout(() => setCopied(false), 2000);
        } catch (err) {
          console.error('è¤‡è£½å¤±æ•—:', err);
          // é™ç´šæ–¹æ¡ˆï¼šä½¿ç”¨å‚³çµ±æ–¹æ³•
          const textArea = document.createElement('textarea');
          textArea.value = message;
          textArea.style.position = 'fixed';
          textArea.style.opacity = '0';
          document.body.appendChild(textArea);
          textArea.select();
          try {
            document.execCommand('copy');
            setCopied(true);
            setTimeout(() => setCopied(false), 2000);
          } catch (e) {
            console.error('è¤‡è£½å¤±æ•—:', e);
          }
          document.body.removeChild(textArea);
        }
      };

      return (
        <div className="min-h-screen bg-gray-900 flex flex-col items-center justify-center p-6 text-center animate-fade-in relative">
          {onClose && (
            <button onClick={onClose} className="absolute top-4 right-4 text-white hover:text-gray-300 transition-colors p-2 rounded-full hover:bg-white/10" aria-label="é—œé–‰">
              âœ•
            </button>
          )}
          <div className="bg-white p-8 rounded-2xl shadow-2xl max-w-sm w-full space-y-6">
            <div className="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
              <span className="text-green-600 text-4xl">âœ“</span>
            </div>
            <h2 className="text-3xl font-black text-gray-800">è³‡æ–™å·²é€å‡ºï¼</h2>
            <p className="text-gray-600 text-lg leading-relaxed">
              è«‹å‹™å¿…é»æ“Šä¸‹æ–¹æŒ‰éˆ•åŠ å…¥å®˜æ–¹ Line ç¾¤çµ„ï¼Œä¸¦ç§è¨Šï¼š
            </p>
            <div className="bg-gray-100 p-4 rounded-lg border-2 border-dashed border-gray-300 relative">
              <p className="text-xl font-bold text-red-600 select-all pr-10">
                ã€Œ{message}ã€
              </p>
              <button
                onClick={handleCopy}
                className="absolute top-2 right-2 p-2 text-gray-500 hover:text-gray-700 transition-colors rounded-lg hover:bg-gray-200"
                aria-label="è¤‡è£½è¨Šæ¯"
                title="è¤‡è£½è¨Šæ¯"
              >
                {copied ? 'âœ“' : 'ğŸ“‹'}
              </button>
            </div>
            {copied && (
              <p className="text-sm text-green-600 font-bold animate-pulse">âœ“ å·²è¤‡è£½åˆ°å‰ªè²¼æ¿ï¼</p>
            )}
            <a href={lineUrl} target="_blank" rel="noopener noreferrer" className="block w-full bg-[#06C755] hover:bg-[#05b34c] text-white font-bold text-xl py-4 rounded-xl shadow-lg transform active:scale-95 transition-all">
              åŠ å…¥ Line å®˜æ–¹å¸³è™Ÿ
            </a>
            <p className="text-xs text-gray-400 mt-4">é»æ“Šä¸Šæ–¹æŒ‰éˆ•å°‡é–‹å•Ÿ Line æ‡‰ç”¨ç¨‹å¼</p>
            {onClose && (
              <button onClick={onClose} className="w-full mt-4 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold text-lg py-3 rounded-xl shadow-md transform active:scale-95 transition-all flex items-center justify-center gap-2">
                ğŸ  è¿”å›é¦–é 
              </button>
            )}
          </div>
        </div>
      );
    }

    // Main App
    function App() {
      const [loading, setLoading] = useState(true);
      const [isSubmitted, setIsSubmitted] = useState(false);

      useEffect(() => {
        const timer = setTimeout(() => {
          setLoading(false);
        }, 2000);
        return () => clearTimeout(timer);
      }, []);

      if (loading) {
        return <LoadingScreen />;
      }

      if (isSubmitted) {
        return <SuccessScreen onClose={() => setIsSubmitted(false)} />;
      }

      return (
        <div className="min-h-screen bg-gray-100 flex flex-col font-sans">
          <div className="w-full max-w-[480px] mx-auto bg-white min-h-screen shadow-2xl overflow-hidden flex flex-col animate-fade-in">
            <Hero />
            <Questionnaire onComplete={() => setIsSubmitted(true)} />
            <footer className="bg-gray-900 text-gray-500 text-xs text-center py-6 mt-auto">
              <p>&copy; {new Date().getFullYear()} è”£å“¥æˆ¿åœ°ç”¢. All rights reserved.</p>
            </footer>
          </div>
        </div>
      );
    }

    // Render
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>

